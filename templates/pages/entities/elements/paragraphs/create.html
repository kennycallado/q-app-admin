---
layout: main.webc
---

{% from '/shared/macros.html' import locale_filter %}

{% if not no_header %}
  <qa-ent-header
    header-title="Create Paragraph"
    url-back-button="{{ url_for('elements.paragraphs') }}"></qa-ent-header>
{% endif %}

{% set uid = gen_uid() %}
<qa-ent-details
  self-uid="{{ uid }}"
  self-contained="{{ no_header }}"
  action="{{ url_for('elements.paragraphs') }}"
  create="true"
  edit="true">
  <ix-key-value-list
    slot="meta"
    class="d-block rounded-3 p-2">
    <ix-key-value
      class="fw-bold"
      orientation="vertical"
      label-position="left"
      label="reference">
      <input
        slot="custom-value"
        name="ref"
        placeholder="Enter slug" />
    </ix-key-value>

    <ix-key-value
      class="fw-bold"
      orientation="vertical"
      label-position="left"
      label="type">
      <div
        slot="custom-value"
        class="d-flex">
        <input
          id="{{ uid }}-type-text"
          name="type"
          value="text"
          type="radio" />
        <label for="{{ uid }}-type-text">text</label>

        <input
          id="{{ uid }}-type-h2"
          name="type"
          value="h2"
          type="radio" />
        <label for="{{ uid }}-type-h2">h2</label>

        <input
          id="{{ uid }}-type-h3"
          name="type"
          value="h3"
          type="radio" />
        <label for="{{ uid }}-type-h3">h3</label>
      </div>
    </ix-key-value>
  </ix-key-value-list>

  <ix-key-value-list
    slot="content"
    class="d-block rounded-3 p-2">
    <div class="mt-2 rounded-3">
      <ix-tabs class="rounded-top rounded-top-3">
        <ix-tab-item data-tab-id="en">En</ix-tab-item>
        <ix-tab-item data-tab-id="es">Es</ix-tab-item>
        <ix-tab-item data-tab-id="ca">Vl</ix-tab-item>
      </ix-tabs>

      {% for locale in [ "en", "es", "ca" ] %}
        {% set number = loop.index0 %}
        <div
          class="p-2 rounded-bottom"
          data-tab-content="{{ locale }}">
          <input
            type="hidden"
            name="content[{{ number }}][locale]"
            value="{{ locale }}" />

          <ix-key-value
            class="fw-bold border-0"
            orientation="vertical"
            label="Content">
            <textarea
              name="content[{{ number }}][text]"
              placeholder="Enter text"
              slot="custom-value">
{{ create ? null : locale_filter(paragraph.content, locale, 'text')|trim }}</textarea
            >
          </ix-key-value>
        </div>
        {% set number = null %}
      {% endfor %}

      <script webc:keep>
        me().run((el) =>
          typeof tabs_content === 'function'
            ? tabs_content(el)
            : onloadAdd(() => tabs_content(el)),
        )
      </script>
    </div>
  </ix-key-value-list>
</qa-ent-details>
{% set uid = null %}

<script
  :src="getBundleFileUrl('js', 'file')"
  type="module"
  webc:keep></script>
